import{n as W,r as c,j as e,K as je,M as K,O as fe,h as z,g as ye,Q as Ce,S as Ne,l as ie,m as B,U as ve,V as we}from"./index-liV4V1Uq.js";import Te from"./Program-CcUT1ljD.js";import{i as ke,C as ae,I as me,a as ge}from"./index-CcEBYOKw.js";import{Q as De,B as he}from"./ReactToastify-YsGnr0bX.js";import{C as R,a as S}from"./CRow-B6SVFXtW.js";import{C as Se}from"./CFormCheck-C1GXd4K3.js";import{C as N,a as v}from"./CCardBody-D7cJFJkR.js";import{C as w}from"./CCardHeader-rLMJK4e8.js";import{C as O}from"./CListGroupItem-C2nlnhox.js";import{a as y,b as Pe,c as te}from"./index.es-smJaQxJq.js";import{C as T}from"./CFormInput-BZZhJW11.js";import{C as Fe}from"./CForm-Dvrw1di_.js";import{C as Ie}from"./CFormTextarea-C0q6I-1v.js";import{H as _e}from"./index-BMAp-EK_.js";import{C as Ee}from"./index.esm-miCLaKG7.js";import{C as ce,a as ne,b as oe,c as de,d as be}from"./DefaultLayout-C6uJ3LBP.js";import{b as Ae,c as Re}from"./index-DTZRyai4.js";import{C as re}from"./CInputGroup-DvPYJ8Wt.js";import{C as xe}from"./CInputGroupText-Dn1iQoZ8.js";import{C as Ve}from"./CFormSelect-BBxW9Wn4.js";import{C as Le,a as Ue,b as pe,c as M,d as Be,e as $}from"./CTable-B1IOrf3j.js";import{C as He,a as le}from"./CPaginationItem-DXP24_68.js";import{c as Ke}from"./cil-user-Ddrdy7PS.js";import"./iconBase-D_QDNYIQ.js";import"./index-DHQzYoLy.js";import"./CTooltip-BbVuPfjU.js";import"./isObject-zc6aDx4i.js";import"./getTransitionDurationFromElement-Cpu4p4hx.js";import"./chart-Dp4mhDtA.js";var ue=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M472,96H384V40H352V96H160V40H128V96H40a24.028,24.028,0,0,0-24,24V456a24.028,24.028,0,0,0,24,24H472a24.028,24.028,0,0,0,24-24V120A24.028,24.028,0,0,0,472,96Zm-8,352H48V128h80v40h32V128H352v40h32V128h80Z' class='ci-primary'/><rect width='32' height='32' x='112' y='224' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='200' y='224' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='280' y='224' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='368' y='224' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='112' y='296' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='200' y='296' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='280' y='296' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='368' y='296' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='112' y='368' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='200' y='368' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='280' y='368' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='368' y='368' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/>"];const Oe=({task:t})=>{const s=W(),[r,i]=c.useState(t),[m,P]=c.useState(null),[h,x]=c.useState(""),[p,f]=c.useState(""),[b,k]=c.useState(""),[F,V]=c.useState(""),[o,u]=c.useState("");c.useState("");const[g,_]=c.useState(null),[G,q]=c.useState(t.status==="completed"?"Task completed":"Task in progress");c.useEffect(()=>{console.log("Task Prop:",t),console.log("Current Task:",r);const a=async n=>{try{const C=(await s(je(n))).payload;console.log("User Data:",C),P(C)}catch(I){console.error("Error fetching user:",I)}};t.taskOwner&&(console.log("Fetching user data for task owner:",t.taskOwner),a(t.taskOwner))},[t.taskOwner,r,s]),c.useEffect(()=>{console.log("User State:",m)},[m]);const Q=()=>{if(t.status==="inProgress"&&t.deliverables.length===0){alert("Please add a deliverable before changing the status");return}let a="";t.status==="completed"?a="Task in progress":a="Task completed";const n={...t,status:t.status==="completed"?"inProgress":"completed"};s(K({taskId:t._id,taskData:n})),i(n),q(a)},D=a=>{he.error(`The ${a} field is required.`,{autoClose:3e3})},L=a=>{window.open(a,"_blank")},Z=()=>{if(h==="")return D("Kpi Label");if(p==="")return D("Kpi Value");const a={...t,kpis:[...t.kpis,{label:h,count:p}]};s(K({taskId:t._id,taskData:a})),i(a)},J=async a=>{if(a.preventDefault(),b==="")return D("Deliverable Name");if(!g)return D("Deliverable File");try{const n=new FormData;n.append("file",g),console.log("Uploading file:",g);const I=await fe.post("https://redboost-65f83dc8cbf1.herokuapp.com/upload",n,{headers:{"Content-Type":"multipart/form-data"}});console.log("Upload response:",I.data);const C={...t,deliverables:[...t.deliverables,{fileName:b||g.name,fileUrl:I.data.secure_url}]};s(K({taskId:t._id,taskData:C})),i(C),k(""),_(null)}catch(n){console.error("Error uploading file:",n),he.error("Failed to upload file. Please try again.")}},X=()=>{if(F==="")return D("Rapport Title");if(o==="")return D("Rapport Text");const a={...t,reports:[...t.reports,{label:F,count:o}]};s(K({taskId:t._id,taskData:a})),i(a)},H=a=>{const n=["primary","secondary","success","danger","warning","info","light","dark"];return n[a%n.length]},Y=a=>!isNaN(Date.parse(a)),ee=a=>Y(a)?new Date(a).toLocaleDateString("en-US",{day:"2-digit",month:"2-digit",year:"numeric"}):"";return e.jsxs(e.Fragment,{children:[e.jsx(De,{}),e.jsxs(R,{children:[e.jsx(S,{children:e.jsx("div",{className:"card mb-3",style:{maxWidth:"540px"},children:e.jsxs("div",{className:"row g-0",children:[e.jsx("div",{className:"col-md-4",children:e.jsx("img",{src:ke,alt:"Trendy Pants and Shoes",className:"img-fluid rounded-start"})}),e.jsx("div",{className:"col-md-8",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title",children:"Task Details"}),e.jsxs("p",{className:"card-text",children:[e.jsx("strong",{children:"Task Name:"})," ",r.taskName]}),e.jsxs("p",{className:"card-text",children:[e.jsx("strong",{children:"Task Owner:"})," ",m?m.username||"Unknown":"Loading..."]}),e.jsxs("p",{className:"card-text",children:[e.jsx("strong",{children:"Target Date:"})," ",r.endDate?ee(r.endDate):"No target date set"]}),e.jsxs("p",{className:"card-text",children:[e.jsx("strong",{children:"Status:"})," ",r.status]}),t.status==="inProgress"?e.jsx(Se,{className:"mb-3",style:{display:t.status==="notStarted"?"none":"block"},id:"flexCheckChecked",label:"I have Completed The Task",checked:t.status==="completed",onChange:Q}):e.jsxs("p",{className:" text-center text-success",children:["this Task is ",r.status]})]})})]})})}),e.jsx(S,{children:e.jsxs(N,{children:[e.jsx(w,{className:"bg-dark text-light",children:"Resources"}),e.jsx(v,{children:e.jsxs("div",{children:[e.jsxs("h5",{children:[r.taskName," Resources:"]}),e.jsx(ae,{children:r.resources.map((a,n)=>e.jsx(O,{children:e.jsx(y,{href:a.url,download:!0,color:"link",children:a.fileName})},n))})]})})]})})]}),e.jsxs(N,{className:"mt-3 mb-3",children:[e.jsx(w,{className:"bg-dark text-light",children:"Sections"}),e.jsxs(v,{children:[e.jsxs(N,{className:"mt-3 mb-3",children:[e.jsx(w,{className:"bg-info text-light",children:"KPIs"}),e.jsx(v,{children:e.jsxs(ae,{children:[e.jsx("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"center"},children:r.kpis.map((a,n)=>e.jsxs("div",{className:`card text-bg-${H(n)} mb-3`,style:{minWidth:"260px",marginRight:"10px"},children:[e.jsxs("div",{className:"card-header",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:["KPI-",n," ",e.jsx(me,{})]}),e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title",children:a.label}),e.jsx("p",{className:"card-text",children:a.count})]})]},n))}),e.jsxs(O,{children:[e.jsx("label",{htmlFor:"newKpiLabel",children:"Label:"}),e.jsx(T,{id:"newKpiLabel",placeholder:"KPI Label",value:h,onChange:a=>x(a.target.value),className:"mt-3 mb-3"}),e.jsx("label",{htmlFor:"newKpiValue",children:"Value:"}),e.jsx(T,{id:"newKpiValue",placeholder:"KPI Value",value:p,onChange:a=>f(a.target.value),className:"mt-3 mb-3"}),e.jsx(y,{style:{backgroundColor:"#00cc99"},onClick:()=>Z(),className:"mt-3 mb-3",children:"Add KPI"})]})]})})]}),e.jsxs(N,{className:"mt-3 mb-3",children:[e.jsx(w,{className:"bg-info text-light",children:"Documents"}),e.jsx(v,{children:e.jsxs(ae,{children:[r.deliverables.map((a,n)=>e.jsx(O,{children:e.jsx(y,{onClick:()=>L(a.fileUrl),color:"link",children:a.fileName})},n)),e.jsx(O,{children:e.jsxs(Fe,{onSubmit:J,children:[e.jsx("label",{htmlFor:"newDeliverableName",children:"Name:"}),e.jsx(T,{id:"newDeliverableName",placeholder:"Deliverable Name",value:b,onChange:a=>k(a.target.value)}),e.jsx("label",{htmlFor:"newDeliverableFile",className:"mt-3 mb-3",children:"Upload File:"}),e.jsx("input",{id:"newDeliverableFile",name:"deliverableFile",type:"file",onChange:a=>{console.log("Selected deliverable file:",a.target.files[0]),_(a.target.files[0])}}),e.jsx(y,{style:{backgroundColor:"#00cc99"},type:"submit",className:"mt-3 mb-3",children:"Add Deliverable"})]})})]})})]}),e.jsxs(N,{className:"mt-3 mb-3",children:[e.jsx(w,{className:"bg-info text-light",children:"Reporting Section"}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"center",padding:"20px"},children:r.reports.map((a,n)=>e.jsxs("div",{style:{minWidth:"300px",margin:"10px"},className:`card radius-10 border-start border-0 border-3 border-${H(n)} shadow`,children:[e.jsx(me,{style:{position:"absolute",top:"0",right:"0",fontSize:"20px",margin:"5px"}}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-0 text-secondary",children:a.label}),e.jsx("p",{className:"mb-0 font-13",children:a.count})]}),e.jsx("div",{className:"widgets-icons-2 rounded-circle bg-gradient-ohhappiness text-white ms-auto",children:e.jsx("i",{className:"fa fa-bar-chart"})})]})})]}))}),e.jsxs(v,{children:[e.jsx(T,{placeholder:"Title",value:F,onChange:a=>V(a.target.value),className:"mb-3"}),e.jsx(Ie,{placeholder:"Text",value:o,onChange:a=>u(a.target.value),className:"mt-3 mb-3"}),e.jsx(y,{style:{backgroundColor:"#00cc99"},onClick:()=>X(),className:"mt-3 mb-3",children:"Add Reporting Section"})]})]}),e.jsxs(N,{className:"mt-3 mb-3",children:[e.jsx(w,{className:"bg-info text-light",children:"Comment Section"}),e.jsx(v,{children:e.jsx(ge,{})})]})]})]})]})};function Me({selectedTask:t,setSelectedtask:s}){const r=c.useRef(null),i=h=>{const x=h.target.files[0];if(!x)return;const p={name:x.name,size:x.size};s(f=>({...f,uploadFiles:[...f.uploadFiles,p]}))},m=()=>{r.current.click()},P=h=>{s(x=>({...x,uploadFiles:x.uploadFiles.filter((p,f)=>f!==h)}))};return e.jsxs("div",{className:"upload-box",children:[e.jsxs("form",{action:"",onClick:m,children:[e.jsx("input",{type:"file",className:"file-upload-input",name:"file",hidden:!0,ref:r,onChange:i}),e.jsx("div",{className:"icon",children:e.jsx(Ae,{className:"cloud-icon",style:{color:"#0c77ad"}})}),e.jsx("p",{children:"Browse File To Upload"})]}),e.jsx("section",{className:"uploaded-area",children:t.uploadFiles.map((h,x)=>e.jsx("li",{className:"row",onClick:()=>P(x),children:e.jsxs("div",{className:"content-upload",children:[e.jsx("i",{children:e.jsx(Re,{})}),e.jsx("div",{className:"details",children:e.jsx("span",{className:"name",children:h.name})})]})},x))})]})}function $e({visible:t,setVisible:s,selectedTask:r,setSelectedtask:i}){return e.jsxs(ce,{visible:t,onClose:()=>s(!1),"aria-labelledby":"LiveDemoExampleLabel",backdrop:"static",children:[e.jsx(ne,{closeButton:!0,children:e.jsx(oe,{id:"LiveDemoExampleLabel",children:"Edit Card"})}),e.jsxs(de,{style:{height:"450px",overflow:"auto"},className:"modal-body",children:[e.jsx("div",{className:"mb-3",children:e.jsx(T,{type:"text",id:"taskTitle",placeholder:"Task Title","aria-describedby":"taskTitleHelpInline",value:r.taskName})}),e.jsx("div",{className:"mb-3",children:e.jsx(T,{type:"date",id:"taskDate",placeholder:"Task Date",value:r.targetDate})})]}),e.jsxs(be,{children:[e.jsx(y,{color:"danger",children:"cancel"}),e.jsx(y,{color:"primary",children:"Save"})]})]})}function We(){return e.jsxs("div",{style:{display:"flex",flexWrap:"wrap"},children:[e.jsx("div",{className:"card bg-success text-white m-2",style:{width:"300px"},children:e.jsxs("div",{className:"card-body",children:[e.jsx("h2",{className:"card-title",children:"This is a title"}),e.jsx("p",{className:"card-text",children:"This is body text inside my Bootstrap card."})]})}),e.jsx("div",{className:"card bg-danger text-white m-2",style:{width:"300px"},children:e.jsxs("div",{className:"card-body",children:[e.jsx("h2",{className:"card-title",children:"This is a title"}),e.jsx("p",{className:"card-text",children:"This is body text inside my Bootstrap card."})]})}),e.jsx("div",{className:"card bg-warning text-white m-2",style:{width:"300px"},children:e.jsxs("div",{className:"card-body",children:[e.jsx("h2",{className:"card-title",children:"This is a title"}),e.jsx("p",{className:"card-text",children:"This is body text inside my Bootstrap card."})]})}),e.jsx("div",{className:"card bg-secondarytext-white m-2",style:{width:"300px"},children:e.jsxs("div",{className:"card-body",children:[e.jsx("h2",{className:"card-title",children:"This is a title"}),e.jsx("p",{className:"card-text",children:"This is body text inside my Bootstrap card."})]})})]})}function ze({open:t,setOpen:s,selectedTask:r}){const i=()=>{s(!1)};return e.jsxs(ce,{fullscreen:!0,visible:t,onClose:i,"aria-labelledby":"FullscreenExample1",children:[e.jsx(ne,{children:e.jsx(oe,{id:"FullscreenExample1",children:r.title})}),e.jsxs(de,{style:{backgroundColor:"#eee"},children:[e.jsxs(R,{className:"mb-0",children:[e.jsx(S,{xs:12,md:6,children:e.jsx(We,{selectedTask:r})}),e.jsx(S,{xs:12,md:6,children:e.jsx(Me,{})})]}),e.jsx(R,{className:"mb-0",children:e.jsx(ge,{})})]})]})}function Ge({open:t,setOpen:s,handleAddTask:r,activity:i}){const[m,P]=c.useState(""),[h,x]=c.useState(""),[p,f]=c.useState(""),[b,k]=c.useState(""),F=z(o=>o.usersSlice.users),V=o=>{if(o.preventDefault(),!m||!h||!p||!b)alert("All fields are required");else{const u=new Date;u.setHours(0,0,0,0);const g=new Date(h);g.setHours(0,0,0,0);const _={taskName:m,startDate:h,endDate:p,status:g>u?"notStarted":"inProgress",color:g>u?"blue":"pink",taskOwner:b};r(_),s(!1)}};return e.jsx(e.Fragment,{children:e.jsxs(ce,{visible:t,onClose:()=>s(!1),"aria-labelledby":"LiveDemoExampleLabel",backdrop:"static",children:[e.jsx(ne,{onClose:()=>s(!1),children:e.jsx(oe,{id:"LiveDemoExampleLabel",children:"Add Task"})}),e.jsxs(de,{children:[e.jsx(T,{label:"Task Name:",className:"mb-3",type:"text",id:"name",name:"name",placeholder:"Task Name",value:m,onChange:o=>P(o.target.value)}),e.jsxs(re,{className:"mb-3",children:[e.jsx(xe,{id:"basic-addon2",children:"Start Date"}),e.jsx(T,{type:"date",id:"start date",placeholder:"Enter start date",value:h,onChange:o=>x(o.target.value)})]}),e.jsxs(re,{className:"mb-3",children:[e.jsx(xe,{id:"basic-addon2",children:"End Date"}),e.jsx(T,{type:"date",id:"end date",placeholder:"Enter end date",value:p,onChange:o=>f(o.target.value)})]}),e.jsx(re,{className:"mb-3",children:e.jsxs(Ve,{"aria-label":"The Task Owner",onChange:o=>k(o.target.value),value:b,children:[e.jsx("option",{children:"Choose The Task Owner"}),F.map(o=>e.jsx("option",{value:o._id,children:o.username},o._id))]})})]}),e.jsxs(be,{children:[e.jsx(y,{color:"danger",onClick:()=>s(!1),children:"Close"}),e.jsx(y,{color:"primary",onClick:V,children:"Add"})]})]})})}function qe({activity:t,tasks:s}){const r=ye(),i=W(),[m,P]=c.useState(!1),[h,x]=c.useState(!1),[p,f]=c.useState(null),[b,k]=c.useState(!1),[F,V]=c.useState({}),o=4,[u,g]=c.useState(1);c.useEffect(()=>{const l=async()=>{const d={},A=[];for(const j of s)if(!d[j.taskOwner]){console.log(`Fetching user details for user ID: ${j.taskOwner}`);const se=_(j.taskOwner).then(U=>{U?(d[j.taskOwner]=U.username,console.log("Fetched user details:",U)):console.log(`No user details found for user ID: ${j.taskOwner}`)}).catch(U=>{console.error("Error fetching user details:",U)});A.push(se)}await Promise.all(A),V(d),console.log("Updated user names map:",d)};s.length>0&&l()},[s]);const _=async l=>{try{const d=await i(je(l));return console.log("Dispatch result:",d),d.payload}catch(d){return console.error("Error fetching user details:",d),null}},G=u*o,q=G-o,Q=s.slice(q,G),D=l=>{g(l)},L=Math.ceil(s.length/o),Z=()=>{u>1&&g(u-1)},J=()=>{u<L&&g(u+1)},X=l=>{const d={...l,xpPoints:0,resources:[],deliverables:[],kpis:[],activityId:t._id};console.log(d),i(Ce(d)),k(!1)},H=()=>s.filter(l=>l.status==="valid").length,Y=()=>s.filter(l=>l.status==="inProgress").length,ee=()=>s.filter(l=>l.status==="completed").length,a=()=>s.filter(l=>l.status==="notStarted").length,n=()=>s.filter(l=>l.status==="cancelled").length,I=()=>s.filter(l=>l.status==="expired").length,C=l=>{const d=window.location.pathname;r(`${d}/${l._id}`)},E=({status:l,tasks:d,color:A})=>e.jsx(S,{xs:12,md:4,children:e.jsxs(N,{className:"mb-3 card",style:{height:"400px"},children:[e.jsx(w,{className:"text-light",style:{backgroundColor:A,display:"flex",alignItems:"center",justifyContent:"space-between"},children:l}),e.jsx(v,{style:{overflow:"auto"},children:d.map((j,se)=>j.status===l?e.jsx("div",{className:"Card_into_card",children:e.jsxs("div",{onClick:()=>C(j),className:"card border border-success shadow mb-3",style:{maxWidth:"400px",cursor:"pointer"},children:[e.jsx("div",{className:"card-header",children:e.jsx("strong",{children:j.taskName})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"text-muted mb-2",children:[e.jsx(te,{icon:Ke,className:"mr-1"}),"Assigned to: ",F[j.taskOwner]||"Loading..."]}),e.jsxs("div",{className:"text-muted mb-2",children:[e.jsx(te,{icon:ue,className:"mr-1"}),"Start Date: ",new Date(j.startDate).toLocaleDateString()]}),e.jsxs("div",{className:"text-muted mb-2",children:[e.jsx(te,{icon:ue,className:"mr-1"}),"End Date: ",new Date(j.endDate).toLocaleDateString()]}),e.jsx("div",{className:"text-muted",children:j.description})]})]})},se):null)})]})});return e.jsxs(e.Fragment,{children:[b&&e.jsx(Ge,{setOpen:k,open:b,handleAddTask:X,activity:t}),e.jsxs(Pe,{style:{padding:"20px"},className:"mt-4",children:[p&&e.jsx($e,{visible:m,setVisible:P,selectedTask:p,setSelectedtask:f}),p&&e.jsx(ze,{open:h,setOpen:x,selectedTask:p}),e.jsx(R,{children:e.jsx(S,{children:e.jsx(y,{onClick:()=>k(!0),className:"mb-3",rounded:"lg",color:"primary",style:{float:"right"},children:"Add Task"})})}),e.jsxs(R,{className:"mb-3",children:[e.jsx(E,{status:"notStarted",tasks:s,color:"#006666"}),e.jsx(E,{status:"inProgress",tasks:s,color:"#fb5858"}),e.jsx(E,{status:"completed",tasks:s,color:"#0ca279"}),e.jsx(E,{status:"valid",tasks:s,color:"#074a38"}),e.jsx(E,{status:"expired",tasks:s,color:"#dab600"}),e.jsx(E,{status:"cancelled",tasks:s,color:"grey"})]}),e.jsxs(R,{children:[e.jsx(S,{children:e.jsxs(N,{className:"mb-3",children:[e.jsx(w,{className:"bg-dark text-light",children:"Recent Tasks"}),e.jsxs(v,{children:[e.jsx("style",{children:`
                    .table-row:hover {
                      cursor: pointer; /* Change the cursor to pointer */
                      transform: scale(1.05); /* Slightly increase the size */
                      transition: transform 0.8s ease; /* Smooth transition */
                      background-color: #e0e0e0; /* Change the background color on hover */
                      transition: background-color 0.8s ease; /* Smooth transition */
                    }
                    .Card_into_card:hover .card {
                      transform: scale(1.05); /* Slightly increase the size */
                      transition: transform 0.3s ease; /* Smooth transition */
                    }
                    
                  `}),e.jsxs(Le,{striped:!0,responsive:!0,className:"text-center",children:[e.jsx(Ue,{children:e.jsxs(pe,{children:[e.jsx(M,{scope:"col",children:"Target Date"}),e.jsx(M,{scope:"col",children:"Task Name"}),e.jsx(M,{scope:"col",children:"Status"}),e.jsx(M,{scope:"col",children:"View"})]})}),e.jsx(Be,{children:Q.map((l,d)=>e.jsxs(pe,{onClick:()=>C(l),className:"table-row rows_of_table",children:[e.jsx($,{children:new Date(l.endDate).toLocaleDateString()}),e.jsx($,{children:l.taskName}),e.jsx($,{children:l.status}),e.jsx($,{children:e.jsx(_e,{role:"button",style:{fontSize:"25px",color:"#4CAF50"},onClick:A=>{A.stopPropagation(),C(l)}})})]},d))})]}),e.jsxs(He,{align:"center",children:[e.jsx(le,{onClick:Z,disabled:u<=1,"aria-label":"Previous",children:"Previous"}),Array.from({length:L},(l,d)=>e.jsx(le,{active:d+1===u,onClick:()=>D(d+1),children:d+1},d)),e.jsx(le,{onClick:J,disabled:u>=L,"aria-label":"Next",children:"Next"})]})]})]})}),e.jsx(S,{children:e.jsxs(N,{className:"mb-3",children:[e.jsx(w,{className:"bg-dark text-light",children:"Task Progress"}),e.jsx(v,{children:e.jsx(Ee,{type:"bar",data:{labels:["Total Tasks","In Progress","Completed","Valid","Expired","Cancelled","Not Started"],datasets:[{label:"Task Progress",backgroundColor:["pink","lightgreen","green","yellow","grey","blue"],data:[s.length,Y(),ee(),H(),I(),n(),a()]}]},labels:"Status",options:{plugins:{legend:{labels:{color:"#adb7c5"}}},scales:{x:{grid:{color:"#adb7c5"},ticks:{color:"#adb7c5"}},y:{grid:{color:"#adb7c5"},ticks:{color:"#adb7c5"}}}}})})]})})]})]})]})}function Qe({activity:t}){const s=W(),r=z(i=>i.task.tasksByActivityId);return c.useEffect(()=>{s(Ne(t._id))},[s,t._id]),e.jsxs(ie,{children:[e.jsx(B,{path:"/",element:e.jsx(qe,{activity:t,tasks:r})}),r.map(i=>e.jsx(B,{path:`${i._id}/*`,element:e.jsx(Oe,{task:i})},i._id))]})}const Ze=({program:t})=>{console.log("ProgramWithActivities rendered");const s=W(),r=z(i=>i.activity.activitiesByProgramId||[]);return c.useEffect(()=>{s(ve(t._id)).then(i=>{i!=null&&i.payload&&s(we(i.payload.map(m=>({path:`/Monitoring/${encodeURIComponent(t._id)}/${encodeURIComponent(m._id)}`,name:m.name,activityId:m._id}))))})},[s,t._id,t.programTitle]),e.jsxs(ie,{children:[e.jsx(B,{path:"/",element:e.jsx(Te,{activities:r,program:t})}),r.map(i=>e.jsx(B,{path:`${i._id}/*`,element:e.jsx(Qe,{activity:i})},i._id))]})},ks=()=>{const t=z(s=>s.programsSlice.programs);return e.jsx(ie,{children:t.map(s=>e.jsx(B,{name:s.programTitle,path:`/${s._id}/*`,element:e.jsx(Ze,{program:s})},s._id))})};export{ks as default};
