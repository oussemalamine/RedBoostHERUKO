import{j as e,F as u,r as h,h as j,n as k,k as L,o as U,a3 as M}from"./index-D7i1GXSH.js";import{Q as z,B as y}from"./react-toastify.esm-7QKpu2Dh.js";/* empty css                      */import{u as I}from"./user-B3U43cFQ.js";import{F as V,f as H}from"./index-4ahdbka6.js";import{M as T}from"./index-Cafq6fv3.js";import{b as f,c as b,d as g,e as v,f as C}from"./DefaultLayout-CpDzK-wa.js";import{C as o}from"./CFormControlWrapper-BayNpT4r.js";import{C as n}from"./CFormInput-DgLLBXQY.js";import{a as N}from"./index.esm-BQoNxqCC.js";import{C as _,c as $}from"./CTable-Dr1RvjBQ.js";import"./iconBase-CEnx2H4z.js";import"./isObject-BFHkbZTq.js";import"./cil-user-Ddrdy7PS.js";function P({visible:l,setVisible:a,selectedUser:r}){return e.jsxs(f,{visible:l,onClose:()=>a(!1),"aria-labelledby":"LiveDemoExampleLabel",backdrop:"static",children:[e.jsx(b,{closeButton:!0,children:e.jsx(g,{id:"LiveDemoExampleLabel",children:"Edit User"})}),e.jsxs(v,{style:{height:"450px",overflow:"auto"},className:"modal-body",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(o,{htmlFor:"username",children:"Username :"}),e.jsx(n,{type:"text",id:"username",placeholder:"Username","aria-describedby":"usernameHelpInline",value:r.username})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(o,{htmlFor:"email",children:"Email :"}),e.jsx(n,{type:"text",id:"email",placeholder:"Email","aria-describedby":"emailHelpInline",value:r.email})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(o,{htmlFor:"birthday",children:"Exp Points :"}),e.jsx(n,{type:"number",id:"exp",placeholder:"exp",value:r.exp})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(o,{htmlFor:"birthday",children:"Birthday :"}),e.jsx(n,{type:"date",id:"birthday",placeholder:"Birthday",value:r.birthday})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(o,{htmlFor:"department",children:"Department :"}),e.jsx(n,{type:"text",id:"department",placeholder:"Department",value:r.department})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(o,{htmlFor:"address",children:"Address :"}),e.jsx(n,{type:"text",id:"address",placeholder:"Address",value:r.adress})]})]}),e.jsx(C,{children:e.jsx(N,{color:"primary",children:"Save"})})]})}function Q({view:l,setView:a,selectedUser:r}){return e.jsxs(f,{visible:l,onClose:()=>a(!1),"aria-labelledby":"LiveDemoExampleLabel",backdrop:"static",children:[e.jsx(b,{closeButton:!0,children:e.jsx(g,{id:"LiveDemoExampleLabel",children:"View History"})}),e.jsx(v,{className:"modal-body"}),e.jsx(_,{responsive:!0,style:{height:"450px",overflow:"auto"},children:e.jsx($,{style:{alignContent:"center"},children:r&&r.logs&&r.logs.length>0?r.logs.map((d,t)=>e.jsxs(u,{style:{margin:"10px 10px"},color:R(t),children:[d.date," :"," ",d.events.map((m,i)=>e.jsx("span",{style:{backgroundColor:"transparent"},children:m},i))]},t)):e.jsx(u,{style:{margin:"10px 10px"},color:"warning",children:"No logs found."})})}),e.jsx(C,{children:e.jsx(N,{color:"danger",children:"Clear History"})})]})}const R=l=>{const a=["primary","secondary","success","danger","warning","info","light","dark"];return a[l%a.length]};function ie(){const[l,a]=h.useState(!1),[r,d]=h.useState(!1),[t,m]=h.useState(null),i=j(s=>s.usersSlice.users),x=j(s=>s.userData.userData);console.log("users from users :",i);const F=k(),p=()=>{y.error("You are not authorized to perform this action",{autoClose:3e3})},w=()=>{y.success("User Deleted successfully",{autoClose:3e3})},D=async s=>{if(x.role!=="Super Admin"){p();return}try{if((await U.delete(`/users/${s}`)).data){console.log("User Deleted");const B=i.filter(A=>A._id!==s);F(M(B)),w()}}catch(c){console.log(c)}},E=s=>{if(x.role!=="Super Admin"){p();return}a(!0),m(s)},S=s=>{if(x.role!=="Super Admin"){p();return}m(s),d(!0)};return i.length===0?e.jsx(h.Suspense,{fallback:e.jsx("div",{className:"pt-3 text-center",children:e.jsx(L,{color:"primary",variant:"grow"})})}):e.jsxs("div",{className:"container",children:[e.jsx(z,{}),t&&e.jsx(P,{visible:l,setVisible:a,selectedUser:t}),t&&e.jsx(Q,{view:r,setView:d,selectedUser:t}),e.jsx("div",{className:"main-body",children:e.jsx("div",{className:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-xl-4 gutters-sm",children:i.map((s,c)=>e.jsx("div",{className:"col mb-3",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{backgroundColor:`#${W(c)}`,height:"100px"},className:"card-img-top"}),e.jsxs("div",{className:"card-body text-center",children:[e.jsx("img",{src:s.image?s.image:I,style:{width:"110px",marginTop:"-65px"},alt:"User",className:"img-fluid img-thumbnail rounded-circle border-0 mb-3"}),e.jsx("h5",{className:"card-title",children:s.username}),e.jsx("p",{className:"text-secondary mb-1",children:s.role}),e.jsx("p",{className:"text-muted font-size-sm",children:s.email})]}),e.jsx("div",{className:"card-footer",children:e.jsxs("ul",{className:"list-unstyled mb-0 d-flex justify-content-between align-items-center flex-wrap",style:{maxWidth:"70%",margin:"0 auto"},children:[e.jsx("li",{className:"p-2",children:e.jsx("a",{href:"#",className:"text-primary","data-toggle":"tooltip",title:"View",children:e.jsx(V,{onClick:()=>S(s),style:{fontSize:"1.2rem"}})})}),e.jsx("li",{className:"p-2",children:e.jsx("a",{href:"#",className:"text-info","data-toggle":"tooltip",title:"Edit",children:e.jsx(H,{onClick:()=>E(s),style:{fontSize:"1.2rem"}})})}),s._id!==x._id?e.jsx("li",{className:"p-2",children:e.jsx("a",{href:"#",className:"text-danger","data-toggle":"tooltip",title:"Delete",children:e.jsx(T,{onClick:()=>D(s._id),style:{fontSize:"1.2rem"}})})}):null]})})]})},c))})})]})}const W=l=>{const a=["FFB6C1","87CEFA","20B2AA","FFA07A","7B68EE","BA55D3","FF4500","191970","DDA0DD","DB7093","663399","FF8C00"];return a[l%a.length]};export{ie as default};
