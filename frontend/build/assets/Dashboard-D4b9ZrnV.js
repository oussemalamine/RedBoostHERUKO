import{j as e,L as C,g as y,r as g,o as T,f as v}from"./index-BTdwLRQc.js";import{i as f,h as L,e as D,f as u}from"./index.es-xlEi7sAE.js";import{a as m,b as p}from"./isObject-nES2GppK.js";import{a as b,h as k,l as w,j as d,k as i,m as c,n as N,o as A,i as E}from"./DefaultLayout-CHZ6SiQ1.js";import{i as P}from"./user-D27XD59X.js";import{F as U,i as M}from"./index-C61qVTdC.js";import"./cil-user-CfnR4Zjn.js";import"./index-NUiPB-It.js";var B=["512 512","<polygon fill='var(--ci-primary-color, currentColor)' points='497.333 239.999 80.092 239.999 176.087 144.004 153.46 121.377 18.837 256 153.46 390.623 176.087 367.996 80.09 271.999 497.333 271.999 497.333 239.999' class='ci-primary'/>"],H=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M462.541,316.3l-64.344-42.1,24.774-45.418A79.124,79.124,0,0,0,432.093,192V120A103.941,103.941,0,0,0,257.484,43.523L279.232,67a71.989,71.989,0,0,1,120.861,53v72a46.809,46.809,0,0,1-5.215,21.452L355.962,284.8l89.058,58.274a42.16,42.16,0,0,1,19.073,35.421V432h-72v32h104V378.494A74.061,74.061,0,0,0,462.541,316.3Z' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M318.541,348.3l-64.343-42.1,24.773-45.418A79.124,79.124,0,0,0,288.093,224V152A104.212,104.212,0,0,0,184.04,47.866C126.723,47.866,80.093,94.581,80.093,152v72a78,78,0,0,0,9.015,36.775l24.908,45.664L50.047,348.3A74.022,74.022,0,0,0,16.5,410.4L16,496H352.093V410.494A74.061,74.061,0,0,0,318.541,348.3ZM320.093,464H48.186l.31-53.506a42.158,42.158,0,0,1,19.073-35.421l88.682-58.029L117.2,245.452A46.838,46.838,0,0,1,112.093,224V152a72,72,0,1,1,144,0v72a46.809,46.809,0,0,1-5.215,21.452L211.962,316.8l89.058,58.274a42.16,42.16,0,0,1,19.073,35.421Z' class='ci-primary'/>"];const V=({user:a,onBack:o})=>e.jsxs(m,{children:[e.jsx(b,{className:"bg-dark text-light",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs(C,{to:"/",className:"text-light me-3",onClick:o,children:[e.jsx(f,{icon:B})," Back to Dashboard"]}),"User Details"]})}),e.jsx(p,{children:a&&e.jsx(k,{responsive:"sm",children:e.jsxs(w,{children:[e.jsxs(d,{children:[e.jsx(i,{children:"Photo:"}),e.jsx(c,{children:e.jsx(N,{size:"xl",src:a.image.length>0?a.image:userAvatar})})]}),e.jsxs(d,{children:[e.jsx(i,{children:"XP Points:"}),e.jsx(c,{children:a.exp})]}),e.jsxs(d,{children:[e.jsx(i,{children:"Email:"}),e.jsx(c,{children:a.email})]}),e.jsxs(d,{children:[e.jsx(i,{children:"Role:"}),e.jsx(c,{children:a.role})]}),e.jsxs(d,{children:[e.jsx(i,{children:"Department:"}),e.jsx(c,{children:a.department})]}),e.jsxs(d,{children:[e.jsx(i,{children:"Phone:"}),e.jsx(c,{children:a.phone})]})]})})})]}),R=()=>{const a=y(r=>r.userData.userData),[o,x]=g.useState([]),j=T();g.useEffect(()=>{v.post("/tasksByUser",{userId:a._id}).then(r=>{const n=r.data.map(t=>{let l;switch(t.status){case"completed":l="green";break;case"inProgress":l="blue";break;case"notStarted":l="gray";break;case"cancelled":l="red";break;case"expired":l="orange";break;case"valid":l="purple";break;default:l="black"}return{id:t._id,title:t.taskName,start:t.startDate,end:t.endDate,color:l,extendedProps:{description:t.description,status:t.status}}});x(n)}).catch(r=>{console.error("Error fetching tasks",r)})},[a]);const h=r=>{const n=r.event.id;j(`/dash/${n}`)},s=r=>e.jsxs("div",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",padding:"2px 4px"},title:r.event.extendedProps.description,children:[e.jsx("b",{children:r.timeText}),e.jsx("br",{}),e.jsx("i",{children:r.event.title})]});return e.jsx(U,{plugins:[M],initialView:"dayGridMonth",events:o,eventClick:h,eventContent:s,eventMouseEnter:r=>{r.el.style.cursor="pointer",r.el.style.transition="transform 0.2s, box-shadow 0.2s",r.el.style.transform="scale(1.05)",r.el.style.boxShadow="0 4px 8px rgba(0, 0, 0, 0.2)"},eventMouseLeave:r=>{r.el.style.transform="none",r.el.style.boxShadow="none"},headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,dayGridWeek,dayGridDay"},height:"auto",contentHeight:"auto"})},_=()=>{const a=y(s=>s.userData.userData),[o,x]=g.useState([]);g.useEffect(()=>{v.post("/tasksByUser",{userId:a._id}).then(s=>{const r=s.data.map(n=>{let t;switch(n.status){case"completed":t="success";break;case"inProgress":t="primary";break;case"notStarted":t="secondary";break;case"cancelled":t="danger";break;case"expired":t="warning";break;case"valid":t="info";break;default:t="dark"}const l=new Date(n.startDate).toLocaleDateString(),S=new Date(n.endDate).toLocaleDateString();return{...n,startDate:l,endDate:S,color:t}});x(r)}).catch(s=>{console.error("Error fetching tasks",s)})},[a]);const j={cursor:"pointer",transition:"transform 0.2s, box-shadow 0.2s"},h={transform:"translateY(-5px)",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)"};return e.jsx(L,{children:e.jsx(D,{children:o.map((s,r)=>e.jsx(u,{xs:"12",sm:"6",md:"4",className:"mb-4",children:e.jsx(C,{to:`/Dash/${s._id}`,style:{textDecoration:"none"},onClick:()=>console.log("Clicked Task ID:",s._id),children:e.jsxs(m,{style:j,onMouseEnter:n=>{n.currentTarget.style.transform=h.transform,n.currentTarget.style.boxShadow=h.boxShadow},onMouseLeave:n=>{n.currentTarget.style.transform="none",n.currentTarget.style.boxShadow="none"},children:[e.jsxs(b,{children:[s.taskName,e.jsx(A,{color:s.color,className:"float-right",children:s.status})]}),e.jsxs(p,{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Start Date:"})," ",s.startDate]}),e.jsxs("p",{children:[e.jsx("strong",{children:"End Date:"})," ",s.endDate]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Description:"})," ",s.description]})]})]})})},r))})})},Y=()=>{const a=y(s=>s.usersSlice.users),[o,x]=g.useState(null),j=s=>{s.image.length>0?x(s):alert("Please upload a photo to view user details.")},h=()=>{x(null)};return e.jsx(e.Fragment,{children:o?e.jsx(V,{user:o,onBack:h}):e.jsx(e.Fragment,{children:e.jsxs(D,{children:[e.jsx(u,{xs:6,children:e.jsxs(m,{className:"mb-4",children:[e.jsx(b,{children:"Online Users"}),e.jsx(p,{children:e.jsxs(k,{align:"middle",className:"mb-0 border table-sm",hover:!0,responsive:!0,children:[e.jsx(E,{className:"text-nowrap",children:e.jsxs(d,{children:[e.jsx(i,{className:"bg-body-tertiary text-center",children:e.jsx(f,{icon:H})}),e.jsx(i,{className:"bg-body-tertiary",children:"Name"}),e.jsx(i,{className:"bg-body-tertiary text-center",children:"Points"}),e.jsx(i,{className:"bg-body-tertiary",children:"Role"})]})}),e.jsx(w,{children:a.map((s,r)=>e.jsxs(d,{onClick:()=>j(s),style:{cursor:"pointer"},children:[e.jsx(c,{className:"text-center",children:e.jsx(N,{size:"md",src:s.image.length>0?s.image:P,status:"success"})}),e.jsx(c,{children:e.jsx("div",{children:s.username})}),e.jsx(c,{className:"text-center",children:s.exp}),e.jsx(c,{children:e.jsx("div",{className:"fw-semibold text-nowrap",children:s.role})})]},r))})]})})]})}),e.jsxs(u,{xs:6,children:[e.jsxs(m,{className:"mb-4",children:[e.jsx(b,{children:"Calendar"}),e.jsx(p,{children:e.jsx(R,{})})]}),e.jsxs(m,{className:"mb-4",children:[e.jsx(b,{children:"Task List"}),e.jsx(p,{children:e.jsx(_,{})})]})]})]})})})};export{Y as default};
