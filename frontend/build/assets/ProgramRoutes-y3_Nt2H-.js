import{r as o,R as ue,c as je,P as E,g as H,j as e,i as ge,h as $,O as M,m as be,o as fe,Q as Ne,S as ye,v as ae,w as B,U as ve,V as Ce}from"./index-BTdwLRQc.js";import we from"./Program-DF45N8JP.js";import{G as Te,c as ke,d as De}from"./index-NUiPB-It.js";import{Q as Se,C as Pe,a as C,b as Fe,B as ce,c as te,d as le,e as re,f as ie,g as he,h as Ie,i as Re,j as ne,k as z,l as Ae,m as q}from"./DefaultLayout-CHZ6SiQ1.js";import{e as A,f as P,a as N,g as k,h as Le,i as Y}from"./index.es-xlEi7sAE.js";import{a as w,b as T,c as Ve}from"./isObject-nES2GppK.js";import{C as O}from"./CListGroupItem-Rj_mKVRp.js";import{H as Ee}from"./index-BtbjTrD9.js";import{C as _e}from"./index.esm-Ck62Oqpo.js";import{C as ee}from"./CInputGroup-CGIGjCUq.js";import{C as oe}from"./CInputGroupText-DY62IaDO.js";import{C as Be,c as He}from"./cil-user-CfnR4Zjn.js";import{C as Ue,a as se}from"./CPaginationItem-CMTepAVC.js";import"./index-C61qVTdC.js";import"./CTooltip-CLz-yX11.js";import"./chart-Dp4mhDtA.js";var _=o.forwardRef(function(s,t){var r,l=s.children,d=s.as,g=d===void 0?"ul":d,h=s.className,c=s.flush,p=s.layout;return ue.createElement(g,{className:je("list-group",(r={"list-group-flush":c},r["list-group-".concat(p)]=p,r),h),ref:t},l)});_.propTypes={as:E.elementType,children:E.node,className:E.string,flush:E.bool,layout:E.oneOf(["horizontal","horizontal-sm","horizontal-md","horizontal-lg","horizontal-xl","horizontal-xxl"])};_.displayName="CListGroup";var de=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M472,96H384V40H352V96H160V40H128V96H40a24.028,24.028,0,0,0-24,24V456a24.028,24.028,0,0,0,24,24H472a24.028,24.028,0,0,0,24-24V120A24.028,24.028,0,0,0,472,96Zm-8,352H48V128h80v40h32V128H352v40h32V128h80Z' class='ci-primary'/><rect width='32' height='32' x='112' y='224' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='200' y='224' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='280' y='224' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='368' y='224' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='112' y='296' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='200' y='296' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='280' y='296' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='368' y='296' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='112' y='368' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='200' y='368' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='280' y='368' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='368' y='368' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/>"];function xe(){const s=H(t=>t.userData.userData);return e.jsx("div",{className:"container my-5 py-5",style:{maxWidth:"100%"},children:e.jsx("div",{className:"row d-flex justify-content-center",children:e.jsx("div",{className:"col-md-12 col-lg-10 col-xl-12",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-body",style:{overflow:"auto",maxHeight:"300px"},children:[e.jsxs("div",{className:"card-container",style:{marginBottom:"20px"},children:[e.jsxs("div",{className:"d-flex flex-start align-items-center",children:[e.jsx("img",{className:"rounded-circle shadow-1-strong me-3",src:"https://mdbcdn.b-cdn.net/img/Photos/Avatars/img%20(19).webp",alt:"avatar",width:"60",height:"60"}),e.jsxs("div",{children:[e.jsx("h6",{className:"fw-bold text-primary mb-1",children:"Lily Coleman"}),e.jsx("p",{className:"text-muted small mb-0",children:"Shared publicly - Jan 2020"})]})]}),e.jsx("p",{className:"mt-3 mb-4 pb-2",children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip consequat."}),e.jsxs("div",{className:"small d-flex justify-content-start",children:[e.jsxs("a",{href:"#!",className:"d-flex align-items-center me-3",children:[e.jsx("i",{className:"far fa-thumbs-up me-2"}),e.jsx("p",{className:"mb-0",children:"Like"})]}),e.jsxs("a",{href:"#!",className:"d-flex align-items-center me-3",children:[e.jsx("i",{className:"far fa-comment-dots me-2"}),e.jsx("p",{className:"mb-0",children:"Comment"})]}),e.jsxs("a",{href:"#!",className:"d-flex align-items-center me-3",children:[e.jsx("i",{className:"fas fa-share me-2"}),e.jsx("p",{className:"mb-0",children:"Share"})]})]})]}),e.jsxs("div",{className:"card-container",children:[e.jsxs("div",{className:"d-flex flex-start align-items-center",children:[e.jsx("img",{className:"rounded-circle shadow-1-strong me-3",src:"https://mdbcdn.b-cdn.net/img/Photos/Avatars/img%20(19).webp",alt:"avatar",width:"60",height:"60"}),e.jsxs("div",{children:[e.jsx("h6",{className:"fw-bold text-primary mb-1",children:"Lily Coleman"}),e.jsx("p",{className:"text-muted small mb-0",children:"Shared publicly - Jan 2020"})]})]}),e.jsx("p",{className:"mt-3 mb-4 pb-2",children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip consequat."}),e.jsxs("div",{className:"small d-flex justify-content-start",children:[e.jsxs("a",{href:"#!",className:"d-flex align-items-center me-3",children:[e.jsx("i",{className:"far fa-thumbs-up me-2"}),e.jsx("p",{className:"mb-0",children:"Like"})]}),e.jsxs("a",{href:"#!",className:"d-flex align-items-center me-3",children:[e.jsx("i",{className:"far fa-comment-dots me-2"}),e.jsx("p",{className:"mb-0",children:"Comment"})]}),e.jsxs("a",{href:"#!",className:"d-flex align-items-center me-3",children:[e.jsx("i",{className:"fas fa-share me-2"}),e.jsx("p",{className:"mb-0",children:"Share"})]})]})]})]}),e.jsxs("div",{className:"card-footer py-3 border-0",style:{backgroundColor:"#f8f9fa"},children:[e.jsxs("div",{className:"d-flex flex-start w-100",children:[e.jsx("img",{className:"rounded-circle shadow-1-strong me-3",src:s.image,alt:"avatar",width:"40",height:"40"}),e.jsxs("div",{"data-mdb-input-init":!0,className:"form-outline w-100",children:[e.jsx("textarea",{className:"form-control",id:"textAreaExample",rows:"4",style:{background:"#fff"}}),e.jsx("label",{className:"form-label",htmlFor:"textAreaExample",children:"Message"})]})]}),e.jsxs("div",{className:"float-end mt-2 pt-1",children:[e.jsx("button",{type:"button","data-mdb-button-init":!0,"data-mdb-ripple-init":!0,className:"btn btn-primary btn-sm",children:"Post comment"}),e.jsx("button",{type:"button","data-mdb-button-init":!0,"data-mdb-ripple-init":!0,className:"btn btn-outline-primary btn-sm",children:"Cancel"})]})]})]})})})})}const Ke=""+new URL("details-7dNbQ7Pl.webp",import.meta.url).href;function me(s){return Te({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"m289.94 256 95-95A24 24 0 0 0 351 127l-95 95-95-95a24 24 0 0 0-34 34l95 95-95 95a24 24 0 1 0 34 34l95-95 95 95a24 24 0 0 0 34-34z"},child:[]}]})(s)}const Me=({task:s})=>{const{taskId:t}=ge();console.log("Received Task:",t);const r=$(),[l,d]=o.useState(s||{}),[g,h]=o.useState(""),[c,p]=o.useState(""),[x,b]=o.useState(""),[y,j]=o.useState(""),[v,m]=o.useState("");o.useState("");const[f,D]=o.useState(null);o.useEffect(()=>{d(s||{})},[s]);const L=()=>{if(s.status==="inProgress"&&s.deliverables.length===0){alert("Please add a deliverable before changing the status");return}let a="";s.status==="completed"?a="Task in progress":a="Task completed";const n={...s,status:s.status==="completed"?"inProgress":"completed"};r(M({taskId:s._id,taskData:n})),d(n),setStatusMessage(a)},S=a=>{ce.error(`The ${a} field is required.`,{autoClose:3e3})},V=a=>{window.open(a,"_blank")},W=()=>{if(g==="")return S("Kpi Label");if(c==="")return S("Kpi Value");const a={...s,kpis:[...s.kpis,{label:g,count:c}]};r(M({taskId:s._id,taskData:a})),d(a)},G=async a=>{if(a.preventDefault(),x==="")return S("Deliverable Name");if(!f)return S("Deliverable File");try{const n=new FormData;n.append("file",f),console.log("Uploading file:",f);const K=await be.post("https://redboost-65f83dc8cbf1.herokuapp.com/upload",n,{headers:{"Content-Type":"multipart/form-data"}});console.log("Upload response:",K.data);const I={...s,deliverables:[...s.deliverables,{fileName:x||f.name,fileUrl:K.data.secure_url}]};r(M({taskId:s._id,taskData:I})),d(I),b(""),D(null)}catch(n){console.error("Error uploading file:",n),ce.error("Failed to upload file. Please try again.")}},Q=()=>{if(y==="")return S("Rapport Title");if(v==="")return S("Rapport Text");const a={...s,reports:[...s.reports,{label:y,count:v}]};r(M({taskId:s._id,taskData:a})),d(a)},U=a=>{const n=["primary","secondary","success","danger","warning","info","light","dark"];return n[a%n.length]},J=a=>!isNaN(Date.parse(a)),Z=a=>J(a)?new Date(a).toLocaleDateString("en-US",{day:"2-digit",month:"2-digit",year:"numeric"}):"";return e.jsxs(e.Fragment,{children:[e.jsx(Se,{}),e.jsxs(A,{children:[e.jsx(P,{children:e.jsx("div",{className:"card mb-3",style:{maxWidth:"540px"},children:e.jsxs("div",{className:"row g-0",children:[e.jsx("div",{className:"col-md-4",children:e.jsx("img",{src:Ke,alt:"Trendy Pants and Shoes",className:"img-fluid rounded-start"})}),e.jsx("div",{className:"col-md-8",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title",children:"Task Details"}),e.jsxs("p",{className:"card-text",children:[e.jsx("strong",{children:"Task Name:"})," ",l.taskName]}),e.jsxs("p",{className:"card-text",children:[e.jsx("strong",{children:"Task Owner:"})," ",l.taskOwner]}),e.jsxs("p",{className:"card-text",children:[e.jsx("strong",{children:"Target Date:"})," ",l.endDate?Z(l.endDate):"No target date set"]}),e.jsxs("p",{className:"card-text",children:[e.jsx("strong",{children:"Status:"})," ",l.status]}),l.status==="inProgress"?e.jsx(Pe,{className:"mb-3",style:{display:s.status==="notStarted"?"none":"block"},id:"flexCheckChecked",label:"I have Completed The Task",checked:s.status==="completed",onChange:L}):e.jsxs("p",{className:" text-center text-success",children:["this Task is ",l.status]})]})})]})})}),e.jsx(P,{children:e.jsxs(w,{children:[e.jsx(C,{className:"bg-dark text-light",children:"Resources"}),e.jsx(T,{children:e.jsxs("div",{children:[e.jsxs("h5",{children:[l.taskName," Resources:"]}),e.jsx(_,{children:l.resources.map((a,n)=>e.jsx(O,{children:e.jsx(N,{href:a.url,download:!0,color:"link",children:a.fileName})},n))})]})})]})})]}),e.jsxs(w,{className:"mt-3 mb-3",children:[e.jsx(C,{className:"bg-dark text-light",children:"Sections"}),e.jsxs(T,{children:[e.jsxs(w,{className:"mt-3 mb-3",children:[e.jsx(C,{className:"bg-info text-light",children:"KPIs"}),e.jsx(T,{children:e.jsxs(_,{children:[e.jsx("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"center"},children:l.kpis.map((a,n)=>e.jsxs("div",{className:`card text-bg-${U(n)} mb-3`,style:{minWidth:"260px",marginRight:"10px"},children:[e.jsxs("div",{className:"card-header",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:["KPI-",n," ",e.jsx(me,{})]}),e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title",children:a.label}),e.jsx("p",{className:"card-text",children:a.count})]})]},n))}),e.jsxs(O,{children:[e.jsx("label",{htmlFor:"newKpiLabel",children:"Label:"}),e.jsx(k,{id:"newKpiLabel",placeholder:"KPI Label",value:g,onChange:a=>h(a.target.value),className:"mt-3 mb-3"}),e.jsx("label",{htmlFor:"newKpiValue",children:"Value:"}),e.jsx(k,{id:"newKpiValue",placeholder:"KPI Value",value:c,onChange:a=>p(a.target.value),className:"mt-3 mb-3"}),e.jsx(N,{style:{backgroundColor:"#00cc99"},onClick:()=>W(),className:"mt-3 mb-3",children:"Add KPI"})]})]})})]}),e.jsxs(w,{className:"mt-3 mb-3",children:[e.jsx(C,{className:"bg-info text-light",children:"Documents"}),e.jsx(T,{children:e.jsxs(_,{children:[l.deliverables.map((a,n)=>e.jsx(O,{children:e.jsx(N,{onClick:()=>V(a.fileUrl),color:"link",children:a.fileName})},n)),e.jsx(O,{children:e.jsxs(Ve,{onSubmit:G,children:[e.jsx("label",{htmlFor:"newDeliverableName",children:"Name:"}),e.jsx(k,{id:"newDeliverableName",placeholder:"Deliverable Name",value:x,onChange:a=>b(a.target.value)}),e.jsx("label",{htmlFor:"newDeliverableFile",className:"mt-3 mb-3",children:"Upload File:"}),e.jsx("input",{id:"newDeliverableFile",name:"deliverableFile",type:"file",onChange:a=>{console.log("Selected deliverable file:",a.target.files[0]),D(a.target.files[0])}}),e.jsx(N,{style:{backgroundColor:"#00cc99"},type:"submit",className:"mt-3 mb-3",children:"Add Deliverable"})]})})]})})]}),e.jsxs(w,{className:"mt-3 mb-3",children:[e.jsx(C,{className:"bg-info text-light",children:"Reporting Section"}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"center",padding:"20px"},children:l.reports.map((a,n)=>e.jsxs("div",{style:{minWidth:"300px",margin:"10px"},className:`card radius-10 border-start border-0 border-3 border-${U(n)} shadow`,children:[e.jsx(me,{style:{position:"absolute",top:"0",right:"0",fontSize:"20px",margin:"5px"}}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-0 text-secondary",children:a.label}),e.jsx("p",{className:"mb-0 font-13",children:a.count})]}),e.jsx("div",{className:"widgets-icons-2 rounded-circle bg-gradient-ohhappiness text-white ms-auto",children:e.jsx("i",{className:"fa fa-bar-chart"})})]})})]}))}),e.jsxs(T,{children:[e.jsx(k,{placeholder:"Title",value:y,onChange:a=>j(a.target.value),className:"mb-3"}),e.jsx(Fe,{placeholder:"Text",value:v,onChange:a=>m(a.target.value),className:"mt-3 mb-3"}),e.jsx(N,{style:{backgroundColor:"#00cc99"},onClick:()=>Q(),className:"mt-3 mb-3",children:"Add Reporting Section"})]})]}),e.jsxs(w,{className:"mt-3 mb-3",children:[e.jsx(C,{className:"bg-info text-light",children:"Comment Section"}),e.jsx(T,{children:e.jsx(xe,{})})]})]})]})]})};function ze({selectedTask:s,setSelectedtask:t}){const r=o.useRef(null),l=h=>{const c=h.target.files[0];if(!c)return;const p={name:c.name,size:c.size};t(x=>({...x,uploadFiles:[...x.uploadFiles,p]}))},d=()=>{r.current.click()},g=h=>{t(c=>({...c,uploadFiles:c.uploadFiles.filter((p,x)=>x!==h)}))};return e.jsxs("div",{className:"upload-box",children:[e.jsxs("form",{action:"",onClick:d,children:[e.jsx("input",{type:"file",className:"file-upload-input",name:"file",hidden:!0,ref:r,onChange:l}),e.jsx("div",{className:"icon",children:e.jsx(ke,{className:"cloud-icon",style:{color:"#0c77ad"}})}),e.jsx("p",{children:"Browse File To Upload"})]}),e.jsx("section",{className:"uploaded-area",children:s.uploadFiles.map((h,c)=>e.jsx("li",{className:"row",onClick:()=>g(c),children:e.jsxs("div",{className:"content-upload",children:[e.jsx("i",{children:e.jsx(De,{})}),e.jsx("div",{className:"details",children:e.jsx("span",{className:"name",children:h.name})})]})},c))})]})}function qe({visible:s,setVisible:t,selectedTask:r,setSelectedtask:l}){return e.jsxs(te,{visible:s,onClose:()=>t(!1),"aria-labelledby":"LiveDemoExampleLabel",backdrop:"static",children:[e.jsx(le,{closeButton:!0,children:e.jsx(re,{id:"LiveDemoExampleLabel",children:"Edit Card"})}),e.jsxs(ie,{style:{height:"450px",overflow:"auto"},className:"modal-body",children:[e.jsx("div",{className:"mb-3",children:e.jsx(k,{type:"text",id:"taskTitle",placeholder:"Task Title","aria-describedby":"taskTitleHelpInline",value:r.taskName})}),e.jsx("div",{className:"mb-3",children:e.jsx(k,{type:"date",id:"taskDate",placeholder:"Task Date",value:r.targetDate})})]}),e.jsxs(he,{children:[e.jsx(N,{color:"danger",children:"cancel"}),e.jsx(N,{color:"primary",children:"Save"})]})]})}function Oe(){return e.jsxs("div",{style:{display:"flex",flexWrap:"wrap"},children:[e.jsx("div",{className:"card bg-success text-white m-2",style:{width:"300px"},children:e.jsxs("div",{className:"card-body",children:[e.jsx("h2",{className:"card-title",children:"This is a title"}),e.jsx("p",{className:"card-text",children:"This is body text inside my Bootstrap card."})]})}),e.jsx("div",{className:"card bg-danger text-white m-2",style:{width:"300px"},children:e.jsxs("div",{className:"card-body",children:[e.jsx("h2",{className:"card-title",children:"This is a title"}),e.jsx("p",{className:"card-text",children:"This is body text inside my Bootstrap card."})]})}),e.jsx("div",{className:"card bg-warning text-white m-2",style:{width:"300px"},children:e.jsxs("div",{className:"card-body",children:[e.jsx("h2",{className:"card-title",children:"This is a title"}),e.jsx("p",{className:"card-text",children:"This is body text inside my Bootstrap card."})]})}),e.jsx("div",{className:"card bg-secondarytext-white m-2",style:{width:"300px"},children:e.jsxs("div",{className:"card-body",children:[e.jsx("h2",{className:"card-title",children:"This is a title"}),e.jsx("p",{className:"card-text",children:"This is body text inside my Bootstrap card."})]})})]})}function $e({open:s,setOpen:t,selectedTask:r}){const l=()=>{t(!1)};return e.jsxs(te,{fullscreen:!0,visible:s,onClose:l,"aria-labelledby":"FullscreenExample1",children:[e.jsx(le,{children:e.jsx(re,{id:"FullscreenExample1",children:r.title})}),e.jsxs(ie,{style:{backgroundColor:"#eee"},children:[e.jsxs(A,{className:"mb-0",children:[e.jsx(P,{xs:12,md:6,children:e.jsx(Oe,{selectedTask:r})}),e.jsx(P,{xs:12,md:6,children:e.jsx(ze,{})})]}),e.jsx(A,{className:"mb-0",children:e.jsx(xe,{})})]})]})}function We({open:s,setOpen:t,handleAddTask:r,activity:l}){const[d,g]=o.useState(""),[h,c]=o.useState(""),[p,x]=o.useState(""),[b,y]=o.useState(""),j=H(m=>m.usersSlice.users),v=m=>{if(m.preventDefault(),!d||!h||!p||!b)alert("All fields are required");else{const f=new Date;f.setHours(0,0,0,0);const D=new Date(h);D.setHours(0,0,0,0);const L={taskName:d,startDate:h,endDate:p,status:D>f?"notStarted":"inProgress",color:D>f?"blue":"pink",taskOwner:b};r(L),t(!1)}};return e.jsx(e.Fragment,{children:e.jsxs(te,{visible:s,onClose:()=>t(!1),"aria-labelledby":"LiveDemoExampleLabel",backdrop:"static",children:[e.jsx(le,{onClose:()=>t(!1),children:e.jsx(re,{id:"LiveDemoExampleLabel",children:"Add Task"})}),e.jsxs(ie,{children:[e.jsx(k,{label:"Task Name:",className:"mb-3",type:"text",id:"name",name:"name",placeholder:"Task Name",value:d,onChange:m=>g(m.target.value)}),e.jsxs(ee,{className:"mb-3",children:[e.jsx(oe,{id:"basic-addon2",children:"Start Date"}),e.jsx(k,{type:"date",id:"start date",placeholder:"Enter start date",value:h,onChange:m=>c(m.target.value)})]}),e.jsxs(ee,{className:"mb-3",children:[e.jsx(oe,{id:"basic-addon2",children:"End Date"}),e.jsx(k,{type:"date",id:"end date",placeholder:"Enter end date",value:p,onChange:m=>x(m.target.value)})]}),e.jsx(ee,{className:"mb-3",children:e.jsxs(Be,{"aria-label":"The Task Owner",onChange:m=>y(m.target.value),value:b,children:[e.jsx("option",{children:"Choose The Task Owner"}),j.map(m=>e.jsx("option",{value:m._id,children:m.username},m._id))]})})]}),e.jsxs(he,{children:[e.jsx(N,{color:"danger",onClick:()=>t(!1),children:"Close"}),e.jsx(N,{color:"primary",onClick:v,children:"Add"})]})]})})}function Ge({activity:s,tasks:t}){const r=fe(),[l,d]=o.useState(!1),[g,h]=o.useState(!1),[c,p]=o.useState(null),[x,b]=o.useState(!1),y=4,[j,v]=o.useState(1),m=j*y,f=m-y,D=t.slice(f,m),L=$(),S=i=>{v(i)},V=Math.ceil(t.length/y),W=()=>{j>1&&v(j-1)},G=()=>{j<V&&v(j+1)},Q=i=>{const u={...i,xpPoints:0,resources:[],deliverables:[],kpis:[],activityId:s._id};console.log(u),L(Ne(u)),b(!1)},U=()=>t.filter(i=>i.status==="valid").length,J=()=>t.filter(i=>i.status==="inProgress").length,Z=()=>t.filter(i=>i.status==="completed").length,a=()=>t.filter(i=>i.status==="notStarted").length,n=()=>t.filter(i=>i.status==="cancelled").length,K=()=>t.filter(i=>i.status==="expired").length,I=i=>{const u=window.location.pathname;r(`${u}/${i.taskName}`)},R=({status:i,tasks:u,color:X})=>e.jsx(P,{xs:12,md:4,children:e.jsxs(w,{className:"mb-3 card",style:{height:"400px"},children:[e.jsx(C,{className:"text-light",style:{backgroundColor:X,display:"flex",alignItems:"center",justifyContent:"space-between"},children:i}),e.jsx(T,{style:{overflow:"auto"},children:u.map((F,pe)=>F.status===i?e.jsx("div",{className:"Card_into_card",children:e.jsxs("div",{onClick:()=>I(F),className:"card border border-success shadow mb-3",style:{maxWidth:"400px",cursor:"pointer"},children:[e.jsx("div",{className:"card-header",children:e.jsx("strong",{children:F.taskName})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"text-muted mb-2",children:[e.jsx(Y,{icon:He,className:"mr-1"}),"Assigned to: ",F.taskOwner]}),e.jsxs("div",{className:"text-muted mb-2",children:[e.jsx(Y,{icon:de,className:"mr-1"}),"Start Date: ",new Date(F.startDate).toLocaleDateString()]}),e.jsxs("div",{className:"text-muted mb-2",children:[e.jsx(Y,{icon:de,className:"mr-1"}),"End Date: ",new Date(F.endDate).toLocaleDateString()]}),e.jsx("div",{className:"text-muted",children:F.description})]})]})},pe):null)})]})});return e.jsxs(e.Fragment,{children:[x&&e.jsx(We,{setOpen:b,open:x,handleAddTask:Q,activity:s}),e.jsxs(Le,{style:{padding:"20px"},className:"mt-4",children:[c&&e.jsx(qe,{visible:l,setVisible:d,selectedTask:c,setSelectedtask:p}),c&&e.jsx($e,{open:g,setOpen:h,selectedTask:c}),e.jsx(A,{children:e.jsx(P,{children:e.jsx(N,{onClick:()=>b(!0),className:"mb-3",rounded:"lg",color:"primary",style:{float:"right"},children:"Add Task"})})}),e.jsxs(A,{className:"mb-3",children:[e.jsx(R,{status:"notStarted",tasks:t,color:"#006666"}),e.jsx(R,{status:"inProgress",tasks:t,color:"#fb5858"}),e.jsx(R,{status:"completed",tasks:t,color:"#0ca279"}),e.jsx(R,{status:"valid",tasks:t,color:"#074a38"}),e.jsx(R,{status:"expired",tasks:t,color:"#dab600"}),e.jsx(R,{status:"cancelled",tasks:t,color:"grey"})]}),e.jsxs(A,{children:[e.jsx(P,{children:e.jsxs(w,{className:"mb-3",children:[e.jsx(C,{className:"bg-dark text-light",children:"Recent Tasks"}),e.jsxs(T,{children:[e.jsx("style",{children:`
                    .table-row:hover {
                      cursor: pointer; /* Change the cursor to pointer */
                      transform: scale(1.05); /* Slightly increase the size */
                      transition: transform 0.8s ease; /* Smooth transition */
                      background-color: #e0e0e0; /* Change the background color on hover */
                      transition: background-color 0.8s ease; /* Smooth transition */
                    }
                    .Card_into_card:hover .card {
                      transform: scale(1.05); /* Slightly increase the size */
                      transition: transform 0.3s ease; /* Smooth transition */
                    }
                    
                  `}),e.jsxs(Ie,{striped:!0,responsive:!0,className:"text-center",children:[e.jsx(Re,{children:e.jsxs(ne,{children:[e.jsx(z,{scope:"col",children:"Target Date"}),e.jsx(z,{scope:"col",children:"Task Name"}),e.jsx(z,{scope:"col",children:"Status"}),e.jsx(z,{scope:"col",children:"View"})]})}),e.jsx(Ae,{children:D.map((i,u)=>e.jsxs(ne,{onClick:()=>I(i),className:"table-row rows_of_table",children:[e.jsx(q,{children:new Date(i.endDate).toLocaleDateString()}),e.jsx(q,{children:i.taskName}),e.jsx(q,{children:i.status}),e.jsx(q,{children:e.jsx(Ee,{role:"button",style:{fontSize:"25px",color:"#4CAF50"},onClick:X=>{X.stopPropagation(),I(i)}})})]},u))})]}),e.jsxs(Ue,{align:"center",children:[e.jsx(se,{onClick:W,disabled:j<=1,"aria-label":"Previous",children:"Previous"}),Array.from({length:V},(i,u)=>e.jsx(se,{active:u+1===j,onClick:()=>S(u+1),children:u+1},u)),e.jsx(se,{onClick:G,disabled:j>=V,"aria-label":"Next",children:"Next"})]})]})]})}),e.jsx(P,{children:e.jsxs(w,{className:"mb-3",children:[e.jsx(C,{className:"bg-dark text-light",children:"Task Progress"}),e.jsx(T,{children:e.jsx(_e,{type:"bar",data:{labels:["Total Tasks","In Progress","Completed","Valid","Expired","Cancelled","Not Started"],datasets:[{label:"Task Progress",backgroundColor:["pink","lightgreen","green","yellow","grey","blue"],data:[t.length,J(),Z(),U(),K(),n(),a()]}]},labels:"Status",options:{plugins:{legend:{labels:{color:"#adb7c5"}}},scales:{x:{grid:{color:"#adb7c5"},ticks:{color:"#adb7c5"}},y:{grid:{color:"#adb7c5"},ticks:{color:"#adb7c5"}}}}})})]})})]})]})]})}function Qe({activity:s}){const t=$(),r=H(l=>l.task.tasksByActivityId);return o.useEffect(()=>{t(ye(s._id))},[t,s._id]),e.jsxs(ae,{children:[e.jsx(B,{path:"/",element:e.jsx(Ge,{activity:s,tasks:r})}),r.map(l=>e.jsx(B,{path:`${l.taskName}/*`,element:e.jsx(Me,{task:l})},l._id))]})}const Je=({program:s})=>{console.log("ProgramWithActivities rendered");const t=$(),r=H(l=>l.activity.activitiesByProgramId||[]);return o.useEffect(()=>{t(ve(s._id)).then(l=>{l!=null&&l.payload&&t(Ce(l.payload.map(d=>({path:`/Monitoring/${encodeURIComponent(s.programTitle)}/${encodeURIComponent(d.name)}`,name:d.name,activityId:d._id}))))})},[t,s._id,s.programTitle]),e.jsxs(ae,{children:[e.jsx(B,{path:"/",element:e.jsx(we,{activities:r,program:s})}),r.map(l=>e.jsx(B,{path:`${l.name}/*`,element:e.jsx(Qe,{activity:l})},l._id))]})},xs=()=>{const s=H(t=>t.programsSlice.programs);return e.jsx(ae,{children:s.map(t=>e.jsx(B,{name:t.programTitle,path:`/${t.programTitle}/*`,element:e.jsx(Je,{program:t})},t._id))})};export{xs as default};
