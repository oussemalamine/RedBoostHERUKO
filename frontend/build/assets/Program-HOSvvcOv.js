import{r as C,j as e,g as B,n as G,k as R,V,U}from"./index-DKCMJgNB.js";import{G as A}from"./iconBase-D6XgJAoK.js";import{d as _,e as $}from"./index-9Mn8ITgz.js";import{F as W,i as Z}from"./index-D7Y83f3a.js";import{C as q,a as J,b as O,c as K,d as Q}from"./DefaultLayout-D8kurD0f.js";import{C as f}from"./CFormInput-BzENBy2A.js";import{C as X}from"./CFormTextarea-CkGO2Xo4.js";import{C as N}from"./CInputGroup-Bzy0gWHQ.js";import{C as M}from"./CInputGroupText-H34vpr4z.js";import{a as z,b as w}from"./index.es-D__bQToy.js";import"./index-oJ1FhYxc.js";import{C as D,a as g}from"./CRow-mngmK0Nq.js";import{C as b,a as y}from"./CCardBody-CRfPToi2.js";import{C as P}from"./CCardHeader-gPVzFuiV.js";import{C as E,d as I,b as S,c as p,e as u,a as Y}from"./CTable-BoHBgh-n.js";import{C as e1,a as k}from"./CPaginationItem-aTX0Zgmh.js";import"./isObject-C1cZEjfy.js";import"./cil-user-Ddrdy7PS.js";function t1(t){return A({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M15.8407 12.691C15.8185 12.6975 15.7966 12.7043 15.7743 12.7104C15.6382 12.749 15.4987 12.7727 15.3604 12.7727C14.7502 12.7727 14.4056 12.3605 14.5907 11.852C14.7261 11.4801 15.0814 11.1663 15.5152 11.021C16.1874 10.7758 16.6571 10.2167 16.6571 9.56612C16.6571 8.68948 15.8043 7.97881 14.7523 7.97881C13.7003 7.97881 12.8475 8.68948 12.8475 9.56612V14.4339C12.8475 15.6046 12.1693 16.6311 11.1544 17.2117C10.6012 17.5282 9.94956 17.7143 9.24971 17.7143C7.26575 17.7143 5.6518 16.2427 5.6518 14.4339C5.6518 13.8581 5.81642 13.3174 6.10329 12.8466C6.54725 12.1179 7.28702 11.5599 8.17307 11.3055C8.32463 11.2584 8.47956 11.2325 8.63232 11.2325C9.24523 11.2325 9.59142 11.6466 9.40553 12.1574C9.27956 12.5035 8.94031 12.8016 8.54478 12.9601C8.49754 12.9759 8.45157 12.9936 8.4062 13.0122C7.77792 13.2716 7.34493 13.8099 7.34493 14.4339C7.34493 15.3105 8.19769 16.0211 9.24971 16.0211C10.3016 16.0211 11.1544 15.3105 11.1544 14.4339V9.56612C11.1544 8.39537 11.8326 7.36888 12.8475 6.78821C13.4008 6.47172 14.0524 6.28567 14.7523 6.28567C16.7362 6.28567 18.3502 7.75724 18.3502 9.56612C18.3502 10.1418 18.1855 10.6826 17.8987 11.1534C17.4566 11.8789 16.7214 12.435 15.8407 12.691ZM2.00098 12C2.00098 17.5228 6.47814 22 12.001 22C17.5238 22 22.001 17.5228 22.001 12C22.001 6.47716 17.5238 2 12.001 2C6.47814 2 2.00098 6.47716 2.00098 12Z"},child:[]}]})(t)}function a1(t){return A({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm22.3 665.2l.2 31.7c0 4.4-3.6 8.1-8 8.1h-28.4c-4.4 0-8-3.6-8-8v-31.4C401.3 723 359.5 672.4 355 617.4c-.4-4.7 3.3-8.7 8-8.7h46.2c3.9 0 7.3 2.8 7.9 6.6 5.1 31.7 29.8 55.4 74.1 61.3V533.9l-24.7-6.3c-52.3-12.5-102.1-45.1-102.1-112.7 0-72.9 55.4-112.1 126.2-119v-33c0-4.4 3.6-8 8-8h28.1c4.4 0 8 3.6 8 8v32.7c68.5 6.9 119.9 46.9 125.9 109.2.5 4.7-3.2 8.8-8 8.8h-44.9c-4 0-7.4-3-7.9-6.9-4-29.2-27.4-53-65.5-58.2v134.3l25.4 5.9c64.8 16 108.9 47 108.9 116.4 0 75.3-56 117.3-134.3 124.1zM426.6 410.3c0 25.4 15.7 45.1 49.5 57.3 4.7 1.9 9.4 3.4 15 5v-124c-36.9 4.7-64.5 25.4-64.5 61.7zm116.5 135.2c-2.8-.6-5.6-1.3-8.8-2.2V677c42.6-3.8 72-27.2 72-66.4 0-30.7-15.9-50.7-63.2-65.1z"},child:[]}]})(t)}function s1(t){return A({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M204.813 26.47c-47.833 30.147-65.559 69.524-84.504 114.994-19.315 46.354-39.628 98.61-93.305 146.756 6.085 10.885 19.806 21.43 39.465 30.394 10.776-9.337 21.588-19.802 31.865-30.299l-32.568 6.514-3.532-17.652c22.594-5.308 46.576-9.316 67.391-13.479 1.5-12.248 3.734-22.238 7.338-33.045 39.53-9.031 83.046-24.929 119.037-25.304 49.418 4.492 82.3 14.81 119.47 25.427 2.837 11.075 5.085 23.007 6.268 32.795 21.488 2.892 44.897 8.98 68.028 13.606l-3.532 17.652-32.568-6.514c10.277 10.497 21.089 20.962 31.865 30.3 19.659-8.965 33.38-19.51 39.465-30.395-53.677-48.145-73.99-100.402-93.305-146.756-18.945-45.47-36.67-84.847-84.503-114.994C296.238 44.055 277.03 70.62 256 71.003c-24.332-2.907-39.507-25.418-51.188-44.533zM171 74.003h18v16.84l29.234 15.945c8.62-13.111 22.037-21.785 37.766-21.785s29.146 8.674 37.766 21.785L323 90.843v-16.84h18v15h15v18h-25.04l-29.657 16.178c2.726 10.398 3.39 20.056 1.783 29.89l51.209 27.932H376v18h-15v15h-18v-18.658l-45.451-24.791c-8.134 16.76-23.286 28.449-41.549 28.449-18.263 0-33.415-11.689-41.549-28.45L169 195.346v18.658h-18v-15h-15v-18h21.705l51.21-27.932c-1.62-10.023-.816-20.876 1.782-29.89l-29.658-16.178H156v-18h15zm85 29c-15.553 0-30 16.442-30 39s14.447 39 30 39 30-16.442 30-39-14.447-39-30-39zm-25 23h18v16h-18zm32 0h18v16h-18zm-23 23h32v18h-32zm-88.672 96.275c-1.23 4.528-2.197 9.576-2.945 15.01 77.777-16.486 135.335-16.85 214.637-.086-.721-5.099-1.596-10.115-2.674-15.015-81.523-28.826-127.387-28.658-209.018.091zm-4.562 33.422c-.424 9.46-.335 19.679.177 30.32 4.753.039 9.345.031 13.827-.01 6.59-12.958 53.8-23.891 75.593-6.394 31.024-6.023 53.738-16.34 76.233-31.225-56.816-10.167-121.565.987-165.83 7.31zm96.879 40.393c-2.76 28.11-22.07 46.91-51.645 46.91-17.41 0-28.047-15.338-31.088-39.02-4.157.046-8.378.07-12.738.043 3.258 31.757 9.031 65.783 15.209 93.81 12.83-1.074 30.377-7.884 46.246-16.7 15.178-8.432 29.164-18.651 37.057-25.719-7.13-.615-14.143-1.883-21.012-3.72l4.652-17.387c16.713 4.472 33.443 5.046 51.233.03l4.882 17.325a110.67 110.67 0 0 1-21.082 3.791c7.901 7.066 21.864 17.264 37.012 25.68 15.924 8.846 33.54 15.676 46.38 16.715 10.49-45.632 19.036-96.549 16.136-142.2l-21.912-3.13c-18.234 9.981-60.434 35.275-99.33 43.572zm139.638-36.854c.445 8.808.533 17.712.256 26.678 7.592 9.002 16.344 17.933 26.244 26.812-3.032-1.696-6.46-2.726-10.172-2.726-17.814 2.059-25.24 18.28-25.388 33 .571 15.995 9.892 32.652 25.388 33 1.72 0 3.375-.23 4.963-.635 5.28 21.08 13.551 36.341 30.328 49.365-21.42 15.611-63.538 17.105-86.025 14.53a390.133 390.133 0 0 1-16.275 15.382c46.768 5.84 110.236 6.113 127.08-34.878-19.729-11.428-33.27-30.424-37.319-46.85 27.314 6.033 50.22-9.868 50.637-34.73-34.067-11.184-73-63.891-89.717-78.948zm-254.85.057C98.9 314.222 68.38 341.6 33.874 364.604c20.184 21.992 53.465 24.298 75.195 18.358-26.457 40.808-46.046 58.21-81.37 81.76 49.243 14.027 108.243 23.808 151.991 13.185a386.57 386.57 0 0 1-15.96-15.049c-31.675 3.96-65.776 1.813-95.264-4.603 37.443-29.197 53.024-59.135 67.088-87.24a730.285 730.285 0 0 1-2.54-17.582l-9.038 4.52c-23.393 11.696-45.525 13.212-59.72 7.708 26.777-18.845 48.316-37.823 64.526-57.127-.457-9.033-.575-17.797-.347-26.238zm207.204 19.707l12.726 12.728c-6.403 6.404-14.195 10.616-22.363 13.39v16.882h-32v-11.746c-6.205.212-11.752.11-16 .11v-18c16 0 45.88-1.607 57.637-13.364zm81.883 40.447c10.919 9.226 23.07 18.404 36.472 27.553-6.27 11.21-21.687 10.315-30.56 7.648 3.037-11.635.5-26.466-5.912-35.2zm-17.909 8.553c5.604 1.912 7.333 9.947 7.389 15-.435 4.06-1.547 14.87-7.389 15-5.603-1.912-7.333-9.948-7.388-15 .435-4.06 1.547-14.87 7.388-15zM256 399.114c-6.269 8.582-14.137 16.636-22.88 23.873 8.955-3.216 15.62-5.04 22.903-5.021 7.311.02 13.967 1.881 22.948 5.097-8.78-7.256-16.68-15.337-22.971-23.949zm33.77 32.158l-4.922 13.16c-12.197-4.56-19.227-7.07-24.424-8.017l32.744 49.115c14.797-9.823 27.718-20.992 40.074-33.097-16.68-5.461-30.996-12.44-43.472-21.16zm-67.56.014c-13.64 8.811-29.479 17.396-43.45 21.147 13.108 12.633 25.708 23.663 40.072 33.097l32.768-49.152c-5.186.912-12.183 3.405-24.409 8.04z"},child:[]}]})(t)}function n1({open:t,setOpen:c,handleAddActivity:r,program:l}){const[d,m]=C.useState(""),[x,h]=C.useState(""),[i,a]=C.useState(""),[n,o]=C.useState(""),T=s=>{n&&s>n?(alert("Start date must be less than end date"),a(n)):s<l.startDate?alert("Start date must be greater than program start date"):s>l.endDate?alert("Start date must be less than program end date"):a(s)},F=s=>{s<i?(alert("End date must be greater than start date"),o(i)):s>l.endDate?alert("End date must be less than program end date"):s<l.startDate?alert("End date must be greater than program start date"):o(s)},L=s=>{if(s.preventDefault(),!d||!x||!i||!n)alert("All fields are required");else{const j=new Date;j.setHours(0,0,0,0);const v=new Date(i);v.setHours(0,0,0,0);const H={name:d,description:x,startDate:i,endDate:n,color:v>j?"blue":"pink",status:v>j?"notStarted":"inProgress"};r(H),c(!1)}};return e.jsx(e.Fragment,{children:e.jsxs(q,{visible:t,onClose:()=>c(!1),"aria-labelledby":"LiveDemoExampleLabel",backdrop:"static",children:[e.jsx(J,{onClose:()=>c(!1),children:e.jsx(O,{id:"LiveDemoExampleLabel",children:"Add an Activity"})}),e.jsxs(K,{children:[e.jsx(f,{type:"text",id:"name",name:"name",placeholder:"Activity Name",text:"Must be 6-20 characters long.","aria-describedby":"exampleFormControlInputHelpInline",onChange:s=>m(s.target.value)}),e.jsx(X,{id:"description",name:"description",placeholder:"Description",rows:3,text:"Must be 8-20 words long.",onChange:s=>h(s.target.value)}),e.jsxs(N,{className:"mb-3",children:[e.jsx(M,{id:"basic-addon2",children:"Start Date"}),e.jsx(f,{type:"date",id:"start date",placeholder:"Enter start date",value:i,onChange:s=>T(s.target.value)})]}),e.jsxs(N,{children:[e.jsx(M,{id:"basic-addon2",children:"End Date"}),e.jsx(f,{type:"date",id:"end date",placeholder:"Enter end date",value:n,onChange:s=>F(s.target.value)})]})]}),e.jsxs(Q,{children:[e.jsx(z,{color:"danger",onClick:()=>c(!1),children:"Close"}),e.jsx(z,{color:"primary",onClick:L,children:"Add"})]})]})})}const r1=({events:t})=>{const[r,l]=C.useState(1),d=r*5,m=d-5,x=t.slice(m,d),h=Math.ceil(t.length/5),i=()=>{r>1&&l(r-1)},a=()=>{r<h&&l(r+1)};return e.jsxs(e.Fragment,{children:[e.jsxs(E,{striped:!0,responsive:!0,className:"text-center",children:[e.jsx(Y,{children:e.jsxs(S,{children:[e.jsx(p,{scope:"col"}),e.jsx(p,{scope:"col",children:"Activities"}),e.jsx(p,{scope:"col",children:"Date"})]})}),e.jsx(I,{children:x.map((n,o)=>e.jsxs(S,{children:[e.jsx(u,{children:e.jsx("div",{className:"rounded-circle shadow-1-strong me-3 d-flex justify-content-center align-items-center",style:{backgroundColor:n.color,height:"20px",width:"20px"}})}),e.jsx(u,{children:n.name}),e.jsx(u,{children:new Date(n.startDate).toLocaleDateString()})]},o))})]}),e.jsxs(e1,{pages:h,align:"center",children:[e.jsx(k,{onClick:i,disabled:r<=1,"aria-label":"Previous",children:"Previous"}),e.jsx(k,{onClick:a,disabled:r>=h,"aria-label":"Next",children:"Next"})]})]})};function P1({program:t,activities:c}){const r=B(),l=G(),[d,m]=C.useState(!1);console.log("activities",c);const x=a=>{console.log("activityData",a),console.log("program id",t._id);const n={...a,programId:t._id,createdBy:t.authorizedUsers[0]};console.log("finalActivityData",n),l(V(n)).then(o=>{console.log("activity dispatch",o),l(U([{path:`/Monitoring/${encodeURIComponent(t.programTitle)}/${encodeURIComponent(o.payload.name)}`,name:o.payload.name,activityId:o.payload._id}]))}),m(!1)};if(!t)return e.jsx(w,{style:{padding:"20px"},className:"mt-4",children:e.jsx(D,{children:e.jsx(g,{xs:"auto",children:e.jsx(R,{color:"primary"})})})});const h=[{icon:e.jsx(t1,{}),name:"Program Name",value:t.programTitle},{icon:e.jsx(_,{}),name:"Start Date",value:new Date(t.startDate).toLocaleDateString()},{icon:e.jsx($,{}),name:"End Date",value:new Date(t.endDate).toLocaleDateString()},{icon:e.jsx(a1,{}),name:"Budget",value:t.budget},{icon:e.jsx(s1,{}),name:"Program Lead",value:JSON.stringify(t.authorizedUsers).split('"')[1]}],i=a=>{console.log("activity",a),r(`/Dash/Monitoring/${t.programTitle}/${a.title}`)};return e.jsxs(w,{style:{padding:"20px"},className:"mt-4",children:[e.jsx(n1,{open:d,setOpen:m,handleAddActivity:x,program:t}),e.jsxs(D,{className:"mb-3",children:[e.jsx(g,{xs:12,md:8,children:e.jsxs(b,{className:"text-center mb-3",children:[e.jsx(P,{className:"bg-dark text-light",children:"Activites Calendar"}),e.jsxs(y,{children:[" ",e.jsx(W,{plugins:[Z],events:c.map(a=>({id:a._id,title:a.name,start:new Date(a.startDate),end:new Date(a.endDate),color:a.color,allDay:a.allDay})),eventClick:a=>i(a.event._def),initialView:"dayGridWeek",headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,dayGridWeek,dayGridDay"},initialDate:new Date})]})]})}),e.jsx(g,{xs:12,md:4,children:e.jsxs(b,{className:"text-center mb-3",children:[e.jsx(P,{className:"bg-dark text-light",children:"Activities List"}),e.jsxs(y,{children:[e.jsx("div",{className:"text-center flex flex-end mb-3",children:e.jsx(z,{onClick:()=>m(!0),style:{textAlign:"center"},color:"primary",children:"Add Activity"})}),e.jsx(r1,{events:c})]})]})})]}),e.jsx(D,{children:e.jsx(g,{children:e.jsxs(b,{children:[e.jsx(P,{style:{textAlign:"center"},className:"bg-dark text-light",children:"Program Information"}),e.jsx(y,{style:{padding:"50px 0px"},children:e.jsx(E,{responsive:"sm",children:e.jsx(I,{children:h.map((a,n)=>e.jsxs(S,{children:[e.jsxs(p,{style:{display:"flex",alignItems:"center"},children:[a.icon,a.name,":"]}),e.jsx(u,{children:a.value})]},n))})})})]})})})]})}export{P1 as default};
