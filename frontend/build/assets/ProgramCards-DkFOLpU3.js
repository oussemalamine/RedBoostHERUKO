import{n as z,h as u,r as s,j as e,o as U,a2 as $}from"./index-C044J3n2.js";import{P as G}from"./ProgramCard-yvey7Lfz.js";import{b as H,c as V,d as X,e as Z}from"./DefaultLayout-D4EFLpNF.js";import{C as q}from"./CForm-BCNDzr8P.js";import{C as o}from"./CInputGroup-D85mlmTz.js";import{a as h}from"./index.esm-Dq7cVnWY.js";import{a as i,C as D}from"./CRow-CDnwnVXo.js";import{C as t}from"./CFormInput-BFBpJ57N.js";import{C as l}from"./CInputGroupText-Dw9Sms9W.js";import{C as J}from"./CFormTextarea-DKugdT-Y.js";import{C as K}from"./CFormSelect-D-dYJbXu.js";import{C as O,a as Q}from"./CCardBody-DbgPnTI5.js";import"./CListGroupItem-CRvljYGR.js";import"./isObject-NUCaP6_L.js";import"./cil-user-Ddrdy7PS.js";import"./CFormControlWrapper-e2rm-YXt.js";const W=2097152;function he(){const S=z(),x=u(a=>a.usersSlice.users),j=u(a=>a.userData.userData),C=u(a=>a.programsSlice.programs);console.log("users",x),console.log("currentUser",j);const[d,E]=s.useState(""),[c,v]=s.useState(null),[f,F]=s.useState(""),[b,L]=s.useState(""),[n,T]=s.useState(""),[m,I]=s.useState(""),[p,w]=s.useState(""),[y,B]=s.useState(""),[N,g]=s.useState(!1);console.log("programs",C);const P=s.useRef(null),M=a=>{a<n?alert("End date must be greater than start date"):I(a)},k=()=>{P.current.click()},A=()=>{if(c===null||f===""||b===""||n===""||m===""||p===""||y===""){alert("Please fill all the fields");return}const a=new FormData;console.log("logo",c),a.append("logo",c),U.post("/uploadLogo",a,{headers:{"Content-Type":"multipart/form-data"}}).then(r=>{if(r.status===200){console.log("response",r);const R={programTitle:f,programDescription:b,startDate:n,endDate:m,budget:p,authorizedUsers:[y],logo:r.data.secure_url};S($(R))}}).catch(r=>{console.log("error",r)}),g(!1)},_=a=>{const r=a.target.files[0];if(r&&r.size>W){alert("File size exceeds the maximum limit of 2MB");return}v(r),E(r.name)};return e.jsxs(e.Fragment,{children:[e.jsxs(H,{"fullscreen-md-down":"true",visible:N,onClose:()=>g(!1),"aria-labelledby":"FullscreenExample1",children:[e.jsx(V,{children:e.jsx(X,{id:"FullscreenExample1",children:"Add Program"})}),e.jsx(Z,{children:e.jsxs(q,{children:[e.jsxs(o,{className:"mb-3 border rounded",children:[e.jsx(h,{color:"primary",onClick:k,children:"Choose Logo"}),e.jsxs(i,{className:"d-flex align-items-center justify-content-center",children:[e.jsx(t,{ref:P,accept:"image/*",style:{display:"none"},type:"file",id:"logo",name:"logo",placeholder:"Enter logo",onChange:_}),!d&&e.jsx("span",{className:"logo-name",children:"..."}),d&&e.jsx("span",{className:"logo-name",children:d})]})]}),e.jsxs(o,{className:"mb-3",children:[e.jsx(l,{id:"basic-addon2",children:"@"}),e.jsx(t,{id:"program name",placeholder:"Program Name","aria-label":"Program Name","aria-describedby":"basic-addon2",onChange:a=>F(a.target.value)})]}),e.jsx(o,{className:"mb-3",children:e.jsx(J,{type:"text-area",id:"program description",placeholder:"Program Description","aria-label":"Program Description","aria-describedby":"basic-addon2",onChange:a=>L(a.target.value)})}),e.jsxs(i,{className:"mb-3 d-flex gap-3",children:[e.jsxs(o,{children:[e.jsx(l,{id:"basic-addon2",children:"Start Date"}),e.jsx(t,{type:"date",id:"start date",placeholder:"Enter start date",value:n,onChange:a=>T(a.target.value)})]}),e.jsxs(o,{children:[e.jsx(l,{id:"basic-addon2",children:"End Date"}),e.jsx(t,{type:"date",id:"end date",placeholder:"Enter end date",value:m,onChange:a=>M(a.target.value)})]})]}),e.jsxs(o,{className:"mb-3",children:[e.jsx(l,{children:"$"}),e.jsx(t,{type:"number",id:"budget",placeholder:"Enter budget",value:p,onChange:a=>w(a.target.value)}),e.jsx(l,{children:".00"})]}),e.jsx(o,{className:"mb-3",children:e.jsxs(K,{"aria-label":"The Program Lead",onChange:a=>B(a.target.value),children:[e.jsx("option",{children:"Choose The Program Lead"}),x.map(a=>e.jsx("option",{value:a.username,children:a.username},a._id))]})}),e.jsx(D,{xs:{cols:"auto"},children:e.jsx(i,{xs:!0,className:"m-auto",children:e.jsx(h,{color:"primary",onClick:A,children:"Add Program"})})})]})})]}),e.jsx("div",{className:"text-end",children:e.jsx(h,{className:" mb-3",color:"primary",style:j.role==="superAdmin"?{}:{display:"none"},onClick:()=>g(!N),children:"Add Program"})}),e.jsx(O,{className:"mb-4",children:e.jsx(Q,{children:e.jsx(D,{children:C.map((a,r)=>e.jsx(i,{xs:12,sm:6,md:4,lg:3,children:e.jsx(G,{logo:a.logo,title:a.programTitle,path:`${window.location.pathname}/${a._id}`})},r))})})})]})}export{he as default};
